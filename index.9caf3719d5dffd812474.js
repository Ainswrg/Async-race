(()=>{"use strict";var e={524:(e,t,n)=>{n.r(t)},652:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(669),s=n(311),i=a(n(922));class o{static renderNewPage(e){o.url&&(o.url=null);let t=null;switch(e){case"garage":t=new s.GaragePage(e),o.url=e;break;case"winners":{t=new s.WinnersPage(e),o.url=e;const n=i.default.getFromEvent("event");if(!n)throw new Error("Event is undefined");i.default.getIsClickedRace()&&n.notify("reset");break}default:t=new s.ErrorPage(e,404),o.url=e}t&&(async()=>{const e=await t.render();o.url="current-page",o.main.rerender().append(e)})()}enableRouteChange(){window.addEventListener("hashchange",(()=>{const e=window.location.hash.slice(1);o.renderNewPage(e)}))}generatePage(){const e=document.createElement("div");e.classList.add("page-wrapper"),e.append(o.header.render()),e.append(o.main.render()),e.append(o.footer.render()),o.body.append(e)}run(){this.generatePage(),this.enableRouteChange(),window.location.hash="garage",o.renderNewPage("garage")}}o.body=document.body,o.url="current-page",o.main=new r.Main("main","main"),o.header=new r.Header("header","header"),o.footer=new r.Footer("footer","footer"),t.default=o},968:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(413)),s=n(776),i=a(n(44)),o=a(n(922)),d=a(n(30));class l extends r.default{constructor(e,t,n){super(e,t),this.update=async e=>{this.rerenderCars(e),await this.rerenderInterface(),await this.rerenderPagination(),this.toggleUpdateButton("disable")},this.getDistanceBetweenElements=(e,t)=>{const n=e.getBoundingClientRect(),a=t.getBoundingClientRect();return Math.abs(n.left-a.left)+20},this.data=n,this.total=this.data.total||"4",this.event=new i.default,this.db=new d.default}async getGeneratorCars(){return new s.GeneratorCar("div","car-generator").render()}generateTitle(e){const t=document.createElement("h1");t.classList.add("garage__title");const n=e||this.total;return t.innerHTML=`Garage (${n})`,t}generatePageTitle(){const e=document.createElement("h2");e.classList.add("garage__page-title");const t=sessionStorage.getItem("paginationGaragecurrentPage")??"1";return e.innerHTML=`Page #${t}`,e}getCar(e){const t=document.createElement("div");return t.classList.add("cars"),e.items.map((async e=>{const n=new s.Car("div","car",this.event);if(!e.id)throw new Error("Car id is not defined");const a=n.renderCar(e.name,e.color,Number(e.id));return t.append(a),t})),t}eventListener(){o.default.addToEvent("event",this.event),this.event.subscribe((async e=>{const t=sessionStorage.getItem("paginationGaragecurrentPage")??"1",n=await this.db.getCars("garage",t),a=o.default.getCurrentId();switch(e){case"update":await this.update(n);break;case"update-cars":this.rerenderCars(n),await this.rerenderPagination();break;case"select":await this.rerenderInterface(),this.toggleUpdateButton("enable");break;case"race":o.default.setIsClickedRace(!0),await this.raceAllCar(n.items),this.toggleButtons("enable");break;case"reset":o.default.setIsClickedRace(!1),await this.resetAllCars(n.items);break;case"start":this.toggleRaceResetButtons("all"),await this.startDrive(a,await this.db.startEngine(a,"started"));break;case"stop":this.toggleRaceResetButtons("enable"),await this.resetCarOnStartPosition(Number(this.getElement(`carState${a}`).id),a)}}))}toggleCarButtons(e,t){const n=this.getElement(`carSelect${e}`),a=this.getElement(`carRemove${e}`),r=this.getElement(`carStop${e}`),s=this.getElement(`carStart${e}`);if(!(r instanceof HTMLButtonElement))throw new Error("CarStopButton is not HTMLButtonElement");if(!(s instanceof HTMLButtonElement))throw new Error("CarStartButton is not HTMLButtonElement");if(!(n instanceof HTMLButtonElement))throw new Error("SelectButton is not HTMLButtonElement");if(!(a instanceof HTMLButtonElement))throw new Error("RemoveButton is not HTMLButtonElement");"start"===t?(r.classList.remove("car__button--disabled"),s.classList.add("car__button--disabled"),n.classList.add("car__button--disabled"),a.classList.add("car__button--disabled")):(r.classList.add("car__button--disabled"),s.classList.remove("car__button--disabled"),n.classList.remove("car__button--disabled"),a.classList.remove("car__button--disabled"))}toggleUpdateButton(e){const t=o.default.getFromStore("updateInterface");if(!(t&&t instanceof HTMLElement))throw new Error("Update input is not HTMLElement");const n=o.default.getFromStore("updateTitle"),a=o.default.getFromStore("updateColor");if(!(a instanceof HTMLInputElement))throw new Error("UpdateColor is not HTMLInputElement");if(!(n instanceof HTMLInputElement))throw new Error("UpdateInput is not HTMLInputElement");"enable"===e&&(t.classList.remove("car-generator__wrapper--disabled"),""===n.value&&"#000000"===a.value&&t.classList.add("car-generator__wrapper--disabled")),"disable"===e&&t.classList.add("car-generator__wrapper--disabled")}toggleCreateButton(e){const t=o.default.getFromStore("createInterface");if(!(t&&t instanceof HTMLElement))throw new Error("Create input is not HTMLElement");"enable"===e&&t.classList.remove("car-generator__wrapper--disabled"),"disable"===e&&t.classList.add("car-generator__wrapper--disabled")}togglePaginationButtons(e){const t=o.default.getFromStore("paginationGarage");if(!(t&&t instanceof HTMLElement))throw new Error("Pagination is not HTMLElement");"enable"===e&&t.classList.remove("pagination--disabled"),"disable"===e&&t.classList.add("pagination--disabled")}toggleAllButtons(e,t){"enable"===e?(this.toggleCarButtons(t,"stop"),this.togglePaginationButtons("enable"),this.toggleUpdateButton("enable"),this.toggleCreateButton("enable")):(this.toggleCarButtons(t,"start"),this.toggleUpdateButton("disable"),this.togglePaginationButtons("disable"),this.toggleCreateButton("disable"))}toggleButtons(e){"enable"===e?(this.togglePaginationButtons("enable"),this.toggleUpdateButton("enable"),this.toggleCreateButton("enable"),this.toggleRaceResetButtons("disable"),this.togglePageButtons("enable")):(this.toggleUpdateButton("disable"),this.togglePaginationButtons("disable"),this.toggleCreateButton("disable"))}togglePageButtons(e){const t=o.default.getFromStore("navButtonwinners");if(!t)throw new Error("NavButtonWinner is undefined");if(!(t instanceof HTMLAnchorElement))throw new Error("NavButtonWinner is not HTMLAnchorElement");"enable"===e&&t.classList.remove("nav-button--disabled"),"disable"===e&&t.classList.add("nav-button--disabled")}async raceAllCar(e){let t=!0;this.toggleRaceResetButtons("all"),this.togglePageButtons("disable"),await Promise.all(e.map((async e=>{if(void 0===e.id)throw new Error("Car id is not defined");const t=await this.db.startEngine(e.id,"started");e.state=t}))).then((()=>{e.forEach((async e=>{if(void 0===e.id)throw new Error("Car id is not defined");const n=await this.startDrive(e.id,e.state),a=sessionStorage.getItem(`isDone${e.id}`),r=sessionStorage.getItem(`broken${e.id}`);if(a&&t&&"broken"!==r){this.generateModal(e.name,n?.time),t=!1;const a=Number((n.time/1e3).toFixed(2)),r=await this.db.getWinner(e.id);if(r.id){if(!r.wins||void 0===r.time)throw new Error("Car wins or time is not defined");const e=r.wins+1,t=0===r.time?2.55:r.time,n=t>a?a:t;await this.db.updateWinner(r.id,{wins:e,time:n})}else await this.db.createWinner(Number(e.id),1,a);this.togglePageButtons("enable")}return sessionStorage.removeItem(`broken${e.id}`),!1})),o.default.setIsClickedRace(!1),this.togglePaginationButtons("enable")}))}async resetAllCars(e){const t=await Promise.allSettled(e.map((async e=>{if(void 0===e.id)throw new Error("Car id is not defined");const t=this.getElement(`carState${e.id}`);await this.resetCarOnStartPosition(Number(t.id),e.id)})));return this.toggleRaceResetButtons("enable"),t}toggleRaceResetButtons(e){const t=o.default.getFromStore("race"),n=o.default.getFromStore("reset"),a=o.default.getFromStore("generateCars");if(!(t instanceof HTMLButtonElement&&n instanceof HTMLButtonElement&&a instanceof HTMLButtonElement))throw new Error("Reset or GenerateCars is not HTMLButtonElement");"disable"===e&&(t.classList.add("car-generator__button--disabled"),n.classList.remove("car-generator__button--disabled"),a.classList.remove("car-generator__button--disabled")),"all"===e&&(t.classList.add("car-generator__button--disabled"),n.classList.add("car-generator__button--disabled"),a.classList.add("car-generator__button--disabled")),"enable"===e&&(t.classList.remove("car-generator__button--disabled"),n.classList.add("car-generator__button--disabled"),a.classList.remove("car-generator__button--disabled"))}generateModal(e,t){const n=document.createElement("div");n.classList.add("modal");const a=`${e} winning, with ${Number((t/1e3).toFixed(2))} seconds`;n.textContent=a,document.body.append(n),setTimeout((()=>{n.remove()}),5e3)}async resetCarOnStartPosition(e,t){cancelAnimationFrame(e),await this.db.startEngine(t,"stopped");const n=this.getElement(`carModel${t}`);if(!(n instanceof HTMLElement))throw new Error("CarModel is not HTMLDivElement");n.style.transform="translate(0px)",this.toggleAllButtons("enable",t)}getElement(e){const t=o.default.getFromStore(e);if(!t)throw new Error(`${e} is undefined`);return t}async startDrive(e,t){if(this.toggleAllButtons("disable",e),!t)throw new Error("CarState is undefined");const{velocity:n,distance:a}=t,r=this.getElement(`carModel${e}`),s=this.getElement(`carFinishLine${e}`);if(!(r instanceof HTMLDivElement))throw new Error("CarModel is not HTMLDivElement");if(!(s instanceof HTMLImageElement))throw new Error("CarFinishLine is not HTMLDivElement");const i=a/n,d=this.getDistanceBetweenElements(r,s),l=this.animationCar(r,d,i,e);return o.default.addToStore(`carState${e}`,l),await this.db.switchCarEngine(e,"drive").then((t=>(500!==t.status&&404!==t.status||(cancelAnimationFrame(l.id),sessionStorage.setItem(`broken${e}`,"broken")),t))),o.default.getIsClickedRace()||this.togglePaginationButtons("enable"),l}animationCar(e,t,n,a){let r=null;const s={id:0,time:0};return s.finish=!1,s.id=requestAnimationFrame((function i(o){r||(r=o);const d=e,l=o-r,c=Math.round(l*(t/n));d.style.transform=`translate(${Math.min(c,t)}px)`,s.distance=c,c<t?s.id=requestAnimationFrame(i):(s.finish=!0,sessionStorage.setItem(`isDone${a}`,JSON.stringify(!0))),s.time=l})),s}rerenderCars(e){const t=o.default.getFromStore("containerCar");if(!(t&&t instanceof HTMLDivElement))throw new Error("containerCar is not HTMLDivElement");t.innerHTML="";const n=this.generateTitle(e.total||this.total),a=this.generatePageTitle(),r=this.getCar(e);t.append(n,a,r)}async rerenderInterface(){const e=o.default.getFromStore("generatorCar");if(!(e&&e instanceof HTMLDivElement))throw new Error("Cars container is not HTMLDivElement");e.innerHTML="",e.append(await this.getGeneratorCars()),await this.updateInputs()}async updateInputs(){const e=o.default.getFromStore("car")?.id||"1",t=o.default.getFromStore("updateTitle"),n=o.default.getFromStore("updateColor");if(!(t&&t instanceof HTMLInputElement))throw new Error("UpdateTitle is not HTMLDivElement");if(!(n&&n instanceof HTMLInputElement))throw new Error("UpdateColor is not HTMLDivElement");const a=sessionStorage.getItem("paginationGaragecurrentPage")??"1";(await this.db.getCars("garage",a)).items.forEach((a=>{if(a.id===e){const e=a.name??"",r=a.color??"#000000";n.value=r,t.value=e,sessionStorage.setItem("updateTitle",t.value),sessionStorage.setItem("updateColor",n.value),o.default.addToStore("car",a)}}))}async rerenderPagination(){const e=o.default.getFromStore("paginationGarage");if(!(e&&e instanceof HTMLDivElement))throw new Error("Pagination container is not HTMLDivElement");e.innerHTML="";const t=document.createElement("ul");t.classList.add("pagination__list"),await this.generatePaginationUl(t,"paginationGarage"),e.append(t)}async appendAll(e,t){const n=document.createElement("div");n.classList.add("garage");const a=document.createElement("div");a.classList.add("car-generator");const r=this.generateTitle(t),s=this.generatePageTitle(),i=this.getCar(e);return n.append(r,s,i),a.append(await this.getGeneratorCars()),this.container.append(a,n,await this.generatePagination("paginationGarage")),{generatorCar:a,containerCar:n}}async renderGarage(){this.eventListener();const e=await this.appendAll(this.data,this.total),{containerCar:t,generatorCar:n}=e;o.default.addToStore("containerCar",t),o.default.addToStore("generatorCar",n);const a=o.default.getFromStore("updateTitle"),r=o.default.getFromStore("updateColor");if(!(r instanceof HTMLInputElement))throw new Error("UpdateColor is not HTMLInputElement");if(!(a instanceof HTMLInputElement))throw new Error("UpdateInput is not HTMLInputElement");return""===a.value&&"#000000"===r.value&&this.toggleUpdateButton("disable"),this.container}}t.default=l},776:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Car=t.GeneratorCar=t.Garage=void 0;var r=n(968);Object.defineProperty(t,"Garage",{enumerable:!0,get:function(){return a(r).default}});var s=n(541);Object.defineProperty(t,"GeneratorCar",{enumerable:!0,get:function(){return a(s).default}});var i=n(830);Object.defineProperty(t,"Car",{enumerable:!0,get:function(){return a(i).default}})},830:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(413)),s=a(n(30)),i=a(n(922)),o=a(n(211)),d=a(n(15));class l extends r.default{constructor(e,t,n){super(e,t),this.event=n,this.db=new s.default}generateButton(e,t){const n=document.createElement("button");return n.classList.add(t),n.innerHTML=e,n}generateCarControls(e,t){const n=document.createElement("div");n.classList.add("car__controls"),this.container.id=t.toString();const a=this.generateButton("Select","car__button--select"),r=this.generateButton("Remove","car__button--remove");i.default.addToStore(`carSelect${t}`,a),i.default.addToStore(`carRemove${t}`,r);const s=document.createElement("h4");return s.classList.add("car__title"),s.textContent=e,n.append(a,r,s),this.enableListenersOnButton(r,t.toString(),"delete"),this.enableListenersOnButton(a,t.toString(),"select"),n}async callbackEvent(e,t){const n=i.default.getFromEvent("event");if(!n)throw new Error("Event is undefined");const a=await this.db.getCar(e);if(!a)throw new Error("Car1 is undefined");switch(t){case"delete":this.clearInputsInUpdate(),await this.db.deleteCar(e),await this.db.deleteWinner(e),n.notify("update");break;case"select":i.default.addToStore("car",a),n.notify("select");break;case"start":i.default.setCurrentId(e),i.default.addToStore("car",a),n.notify("start");break;case"stop":i.default.setCurrentId(e),n.notify("stop")}}clearInputsInUpdate(){const e=i.default.getFromStore("updateTitle"),t=i.default.getFromStore("updateColor");if(sessionStorage.removeItem("updateTitle"),sessionStorage.removeItem("updateColor"),!(e&&e instanceof HTMLInputElement))throw new Error("Title input is not HTMLInputElement");if(!(t&&t instanceof HTMLInputElement))throw new Error("Color input is not HTMLInputElement");e.value="",t.value="#000000"}getElement(e){const t=i.default.getFromStore(e);if(!t)throw new Error(`${e} is undefined`);return t}enableListenersOnButton(e,t,n){e.addEventListener("click",(async()=>{await this.callbackEvent(t,n)}))}generateCar(e,t){const n=document.createElement("div");n.classList.add("car__container");const a=document.createElement("div");a.classList.add("car__button-container");const r=this.generateButton("Start","car__button--start"),s=this.generateButton("Stop","car__button--stop");s.classList.add("car__button--disabled"),i.default.addToStore(`carStop${t}`,s),i.default.addToStore(`carStart${t}`,r),this.enableListenersOnButton(r,t.toString(),"start"),this.enableListenersOnButton(s,t.toString(),"stop");const l=document.createElement("div");l.classList.add("car__wrapper");const c=(0,d.default)(e),u=document.createElement("div");u.classList.add("car__model"),u.innerHTML=c;const g=document.createElement("img");return g.classList.add("car__finish-line"),g.src=o.default,i.default.addToStore(`carModel${t}`,u),i.default.addToStore(`carFinishLine${t}`,g),a.append(r,s),l.append(u,g),n.append(a,l),n}renderCar(e,t,n){const a=this.generateCarControls(e,n),r=this.generateCar(t,n);return this.container.append(a,r),this.container}}t.default=l},541:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(413)),s=a(n(30)),i=a(n(922)),o=a(n(991));class d extends r.default{generateGeneratorCars(e){const t=document.createElement("div"),n=document.createElement("input"),a=document.createElement("input"),r=document.createElement("button");return t.classList.add("car-generator__wrapper"),n.classList.add("car-generator__title"),n.setAttribute("type","text"),n.setAttribute("placeholder","Title"),a.classList.add("car-generator__color"),a.setAttribute("type","color"),r.classList.add("car-generator__input-button"),r.innerHTML=e,t.append(n,a,r),{divInput:t,inputForTitle:n,inputForColor:a,button:r}}async getCreateInterface(){const e=this.generateGeneratorCars("create"),t=new s.default;i.default.addToStore("createInterface",e.divInput),i.default.addToStore("createTitle",e.inputForTitle),i.default.addToStore("createColor",e.inputForColor),e.inputForTitle.addEventListener("input",(()=>{sessionStorage.setItem("paginationGaragecreateTitle",e.inputForTitle.value)})),e.inputForColor.addEventListener("input",(()=>{sessionStorage.setItem("paginationGaragecreateColor",e.inputForColor.value)})),e.inputForTitle.value=sessionStorage.getItem("paginationGaragecreateTitle")??"",e.inputForColor.value=sessionStorage.getItem("paginationGaragecreateColor")??"";const n=i.default.getFromEvent("event");if(void 0===n)throw new Error("Event is undefined");return e.button.addEventListener("click",(async()=>{await t.createCar(e.inputForTitle.value,e.inputForColor.value),n.notify("update")})),e.divInput}async getUpdateInterface(){const e=this.generateGeneratorCars("update");i.default.addToStore("updateInterface",e.divInput),i.default.addToStore("updateTitle",e.inputForTitle),i.default.addToStore("updateColor",e.inputForColor);const t=new s.default,n=i.default.getFromEvent("event");if(void 0===n)throw new Error("Event is undefined");const a=i.default.getFromStore("car")?.id||"1";return e.button.addEventListener("click",(async()=>{await t.updateCar(e.inputForTitle.value,e.inputForColor.value,a.toString()),n.notify("update")})),e.inputForTitle.addEventListener("input",(()=>{sessionStorage.setItem("updateTitle",e.inputForTitle.value)})),e.inputForColor.addEventListener("input",(()=>{sessionStorage.setItem("updateColor",e.inputForColor.value)})),e.inputForTitle.value=sessionStorage.getItem("updateTitle")??"",e.inputForColor.value=sessionStorage.getItem("updateColor")??"",e.divInput}generateButton(e){const t=document.createElement("button");return t.classList.add("car-generator__button"),t.innerHTML=e,t}async generateButtons(){const e=document.createElement("div");e.classList.add("car-generator__buttons");const t=await this.enableListenerAndGenerateButton("race"),n=await this.enableListenerAndGenerateButton("reset");n.classList.add("car-generator__button--disabled");const a=this.generateButton("generate cars");return i.default.addToStore("race",t),i.default.addToStore("reset",n),i.default.addToStore("generateCars",a),this.generateRandomCars(a),e.append(t,n,a),e}async generateRandomCars(e){const t=new s.default,n=i.default.getFromEvent("event");if(!n)throw new Error("Event is undefined");const a=(new o.default).generateOneHundredCars();e.addEventListener("click",(async()=>{Promise.all(a.map((async e=>{await t.createCar(e.name,e.color)}))).then((()=>n.notify("update-cars"))).catch((e=>e))}))}async enableListenerAndGenerateButton(e){const t=this.generateButton(e);return t.addEventListener("click",(async()=>{const t=i.default.getFromEvent("event");if(!t)throw new Error("Event is undefined");t.notify(e)})),t}async appendAll(){const e=await this.getCreateInterface(),t=await this.getUpdateInterface(),n=await this.generateButtons();this.container.append(e,t,n)}render(){return this.appendAll(),this.container}}d.cars=[],t.default=d},490:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(30)),s=a(n(413)),i=a(n(15)),o=a(n(922)),d=a(n(44));class l extends s.default{constructor(e,t,n){super(e,t),this.db=new r.default,this.event=new d.default,this.data=n}async generateTitle(){const e=document.createElement("h1");e.classList.add("winners__title");const t=await this.db.getWinners("1");return e.textContent=`Winners (${t.total})`,e}generatePageTitle(){const e=sessionStorage.getItem("paginationWinnerscurrentPage")??"1",t=document.createElement("h3");return t.classList.add("winners__page"),t.textContent=`Page #${e}`,t}async generateCarsWinner(e){const t=document.createElement("div");t.classList.add("winners__cars-container");const n=this.generateContent("navigation");return e.items.map((async(e,n)=>{const a=sessionStorage.getItem("paginationWinnerscurrentPage")??"1";let r=n+1;Number(a)>1&&(r+=10*Number(a)-10);const{id:s,wins:i,time:o}=e;if(!s)throw new Error("Id is undefined");const d=await this.db.getCar(s),{name:l,color:c}=d,u={name:l,color:c,id:s,wins:i,time:o},g=this.generateContent("car",u,r);t.append(g)})),t.append(n),this.container.append(t),t}generateContent(e,t,n=1){const a=this.generateElement("ul",e);if(!(a instanceof HTMLUListElement))throw new Error("Element is not HTMLUListElement");const r=this.generateElement("li",e),s=this.generateElement("li",e),o=this.generateElement("li",e),d=this.generateElement("li",e),l=this.generateElement("li",e);if(t){if(!t.id||!t.wins||!t.time)throw new Error("Id | wins | time is undefined");s.innerHTML=(0,i.default)(t.color),r.textContent=`${n}`,o.textContent=t.name,d.textContent=`${t.wins}`,l.textContent=`${t.time}`}else"DESC"===sessionStorage.getItem("orderWins")?(d.classList.add("desc"),d.classList.remove("asc")):(d.classList.remove("desc"),d.classList.add("asc")),"DESC"===sessionStorage.getItem("orderTime")?(l.classList.add("desc"),l.classList.remove("asc")):(l.classList.remove("desc"),l.classList.add("asc")),this.enableListenersOnButton(d,"wins"),this.enableListenersOnButton(l,"bestTime"),this.fillItems(r,s,o,d,l);return a.append(r,s,o,d,l),a}fillItems(e,t,n,a,r){const[s,i,o,d,l]=[e,t,n,a,r],[c,u]=this.generateUpDownNavigation(),[g,h]=this.generateUpDownNavigation();s.textContent="number",i.textContent="car",o.textContent="name",d.textContent="wins",l.textContent="best time",d.classList.add("winners__navigation-item-toggle"),d.append(c,u),l.textContent="best time",l.classList.add("winners__navigation-item-toggle"),l.append(g,h)}enableListenersOnButton(e,t){e.addEventListener("click",(()=>{if(o.default.addToStore("currentBtn",e),"wins"===t){const e=sessionStorage.getItem("orderWins")??"DESC";sessionStorage.setItem("sort","wins"),"DESC"===e?sessionStorage.setItem("orderWins","ASC"):sessionStorage.setItem("orderWins","DESC")}if("bestTime"===t){const e=sessionStorage.getItem("orderTime")??"DESC";sessionStorage.setItem("sort","time"),"DESC"===e?sessionStorage.setItem("orderTime","ASC"):sessionStorage.setItem("orderTime","DESC")}this.event.notify("update")}))}generateElement(e,t){if("ul"===e){const n=document.createElement(e);return n.classList.add(`winners__${t}`),n}const n=document.createElement("li");return n.classList.add(`winners__${t}-item`),n}generateUpDownNavigation(){const e=document.createElement("span");e.classList.add("winners__navigation-item-up"),e.textContent="↑";const t=document.createElement("span");return t.classList.add("winners__navigation-item-down"),t.textContent="↓",[e,t]}eventListener(){o.default.addToEvent("eventWinners",this.event),this.event.subscribe((async e=>{const t=sessionStorage.getItem("paginationWinnerscurrentPage")??"1",n=sessionStorage.getItem("sort")??"",a=sessionStorage.getItem("orderWins")??"DESC",r=sessionStorage.getItem("orderTime")??"DESC";if(void 0===n)throw new Error("Sort is undefined");const s="wins"===n?a:r,i=await this.db.getWinners(t,n,s);if("update"===e)this.rerenderWinners(i)}))}async appendAll(){const e=await this.generateTitle(),t=this.generatePageTitle();return this.container.append(e,t),this.container}async rerenderWinners(e){return this.container.innerHTML="",await this.appendAll(),await this.generateCarsWinner(e),this.container.append(await this.generatePagination("paginationWinners",10)),this.container}async renderWinners(){return this.eventListener(),await this.appendAll(),await this.generateCarsWinner(this.data),this.container.append(await this.generatePagination("paginationWinners",10)),this.container}}t.default=l},44:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter((t=>t!==e))}notify(e){this.observers.forEach((t=>t(e)))}}},235:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(413)),s=[{text:"2022 Original Ainswrg",url:"https://github.com/Ainswrg"},{text:'<img class="logo" src="https://rs.school/images/rs_school_js.svg" alt="rs_school_js" id="rs" />',url:"https://rs.school/"}];class i extends r.default{renderFooterContent(){const e=document.createElement("ul");e.classList.add("footer__contacts");const t=document.createElement("li");t.classList.add("footer__contacts-item"),e.append(t),this.container.append(e),this.enableListenersOnButton(t)}enableListenersOnButton(e){s.forEach((t=>{const n=document.createElement("a");n.addEventListener("click",(()=>window.open(t.url))),n.innerHTML=t.text,e.append(n)}))}render(){return this.renderFooterContent(),this.container}}t.default=i},635:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(922)),s=a(n(413)),i=[{id:"garage",text:"To Garage"},{id:"winners",text:"To Winners"}];class o extends s.default{renderNavButtons(){const e=document.createElement("div");e.classList.add("header__navigation"),this.generateButtons(e),this.container.append(e)}generateButtons(e){i.forEach((t=>{const n=document.createElement("a");n.classList.add("header__navigation-button"),n.setAttribute("href",`#${t.id}`),r.default.addToStore(`navButton${t.id}`,n),n.innerHTML=t.text,e.append(n)}))}render(){return this.renderNavButtons(),this.container}}t.default=o},669:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Main=t.Footer=t.Header=void 0;var r=n(635);Object.defineProperty(t,"Header",{enumerable:!0,get:function(){return a(r).default}});var s=n(235);Object.defineProperty(t,"Footer",{enumerable:!0,get:function(){return a(s).default}});var i=n(700);Object.defineProperty(t,"Main",{enumerable:!0,get:function(){return a(i).default}})},700:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(413));class s extends r.default{renderMain(){document.createElement("main").classList.add("main")}rerender(){return this.container.innerHTML="",this.renderMain(),this.container}render(){return this.renderMain(),this.container}}t.default=s},922:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n{static setIsClickedRace(e){n.isClickedRace=e}static getIsClickedRace(){return n.isClickedRace}static getCurrentId(){return n.currentId}static setCurrentId(e){n.currentId=e}static getCurrentPage(){return n.currentPage}static setCurrentPage(e){n.currentPage=e}static addToStore(e,t){n.store.set(e,t)}static removeFromStore(e){n.store.delete(e)}static getFromStore(e){return n.store.get(e)}static getFromEvent(e){return n.event.get(e)}static addToEvent(e,t){n.event.set(e,t)}static removeEvent(e){n.event.delete(e)}}n.event=new Map,n.store=new Map,n.currentPage=1,n.currentId="1",n.isClickedRace=!1,t.default=n},413:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(30)),s=a(n(410)),i=a(n(922));t.default=class{constructor(e,t){this.toggleActiveClass=(e,t,n)=>{t===Number(n)?e.classList.add("pagination__item--active"):e.classList.remove("pagination__item--active"),"..."===e.textContent?e.classList.add("pagination__item--disabled"):e.classList.remove("pagination__item--disabled")},this.container=document.createElement(e),this.container.className=t}appendContent(e){this.container.append(e)}appendText(e){this.container.innerText=e}async generatePagination(e,t=7){const n=document.createElement("div");n.classList.add("pagination"),i.default.addToStore(e,n);const a=document.createElement("ul");return a.classList.add("pagination__list"),await this.generatePaginationUl(a,e,t),n.append(a),n}async generatePaginationUl(e,t,n=7){const a=sessionStorage.getItem(`${t}currentPage`)??"1",i=new r.default;let o=null;if(o=7===n?await i.getCars("garage",a):await i.getWinners(a),!o)throw new Error("Data is undefined");const d=Math.ceil(Number(o.total)/n);return new s.default(a,d).generate().map((n=>{const r=document.createElement("li");r.classList.add("pagination__item"),r.textContent=`${n}`;const s=Number(r.textContent);return r.id=`${s}`,this.toggleActiveClass(r,s,a),this.togglePage(r,t),e.append(r)})),e}togglePage(e,t){e.addEventListener("click",(async()=>{const n=Number(e.id),a="paginationWinners"===t?i.default.getFromEvent("eventWinners"):i.default.getFromEvent("event");if(void 0===a)throw new Error("Event is undefined");sessionStorage.setItem(`${t}currentPage`,JSON.stringify(n)),a.notify("update")}))}render(){return this.container}}},202:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.container=document.createElement("div"),this.container.className="main-container",this.container.id=e}createHeaderTitle(e){const t=document.createElement("h1");return t.innerText=e,t}async render(){return this.container}}},30:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n="https://time-charming-lan.glitch.me";t.default=class{constructor(){this.getCars=async(e,t,a=7)=>{const r=await fetch(`${n}/${e}?_page=${t}&_limit=${a}`);return{items:await r.json(),total:r.headers.get("X-Total-Count")}},this.getCar=async e=>(await fetch(`${n}/garage/${e}`)).json(),this.createCar=async(e,t)=>{await fetch(`${n}/garage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,color:t})})},this.updateCar=async(e,t,a)=>{await fetch(`${n}/garage/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,color:t})})},this.deleteCar=async e=>{await fetch(`${n}/garage/${e}`,{method:"DELETE"})},this.startEngine=async(e,t)=>(await fetch(`${n}/engine?id=${e}&status=${t}`,{method:"PATCH"})).json(),this.switchCarEngine=async(e,t)=>await fetch(`${n}/engine?id=${e}&status=${t}`,{method:"PATCH"}),this.getWinners=async(e,t="",a="",r=10)=>{const s=await fetch(`${n}/winners?_page=${e}&_limit=${r}&_sort=${t}&_order=${a}`);return{items:await s.json(),total:s.headers.get("X-Total-Count")}},this.getWinner=async e=>(await fetch(`${n}/winners/${e}`)).json(),this.updateWinner=async(e,t)=>(await fetch(`${n}/winners/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json(),this.deleteWinner=async e=>{await fetch(`${n}/winners/${e}`,{method:"DELETE"})},this.createWinner=async(e,t,a)=>{await fetch(`${n}/winners`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,wins:t,time:a})})}}}},991:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(284)),s=a(n(851));t.default=class{constructor(){this.generateRandomCar=()=>{const e=Math.floor(Math.random()*r.default.length),t=Math.floor(Math.random()*s.default.length);return`${r.default[e]} ${s.default[t]}`},this.generateRandomColor=()=>Math.floor(16777215*Math.random()).toString(16),this.generateCar=()=>({name:this.generateRandomCar(),color:`#${this.generateRandomColor()}`}),this.generateOneHundredCars=()=>{const e=[];for(let t=0;t<100;t+=1)e.push(this.generateCar());return e}}}},15:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=e=>`<svg fill="${e}"xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:svg="http://www.w3.org/2000/svg" id="svg2" viewBox="0 0 167.83 55.332" version="1.0">\n    <g id="layer1" transform="translate(-227.51 -167.55)">\n      <path id="path2220" fill-rule="evenodd" d="m229.52 196.33c-0.09-8.41 0.63-14.12 2.92-14.62l11.85-1.54c8.38-3.87 17.11-8.68 24.77-10.62 5.88-1.17 12.1-1.88 18.77-2 13.43 0.22 28.36-0.7 37.85 2.47 9.04 4.17 17.95 8.62 26.46 13.84 11.48 0.79 34.91 3.98 38.32 7.7 1.69 2.28 3.05 4.73 3.69 7.54 1.49 0.61 1.38 2.82 0.77 5.53l-0.16 5.54-5.69 2.31-11.23 1.39-2.92 0.77c-4.24 9.94-19.98 8.71-24.31-0.47l-3.54 0.62-63.09-0.62-0.77 1.08-4.92-0.15c-3.3 10.15-22.17 11.08-25.08-1.39h-2.46l-7.39-1.07-11.23-1.54c-3.06-1.82-4.34-3.19-4.62-4.31l0.77-1.08-0.61-6.15c0.41-2.09 0.79-2.76 1.85-3.23zm68.16-26.37c-6.77 0.01-13.39 0.26-19.34 1.57l1.39 11.78 20.9 0.72c0.86-0.18 1.76-0.32 1.59-1.79l-2.18-12.28c-0.79-0.01-1.57 0-2.36 0zm-20.34 1.8c-4.01 0.97-7.7 2.47-10.9 4.74-1.27 0.85-1.73 1.85-1.68 2.97 0.59 2.54 2.09 3.57 4.26 3.47l9.71 0.33-1.39-11.51zm27.26-1.7l4.46 12.68c0.56 0.92 1.38 1.61 2.88 1.69l21.7 0.89c-3.09-2.11-0.55-6 2.58-5.15-5.87-4.89-12.24-7.99-19.13-9.22-4.05-0.65-8.26-0.79-12.49-0.89zm-71.88 12.58c-1.78 0.64-2.21 5.18-2.29 10.75l5.83-0.05c0.22-1.95 0.26-3.9 0.02-5.85-0.57-3.41-2.17-3.83-3.56-4.85zm38.65 5.22h5.51c0.43 0 0.79 0.36 0.79 0.79 0 0.44-0.36 0.79-0.79 0.79h-5.51c-0.44 0-0.79-0.35-0.79-0.79 0-0.43 0.35-0.79 0.79-0.79zm38 0.91h5.51c0.44 0 0.79 0.35 0.79 0.79s-0.35 0.79-0.79 0.79h-5.51c-0.44 0-0.79-0.35-0.79-0.79s0.35-0.79 0.79-0.79zm-34.25 21.22c0 5.04-4.09 9.13-9.13 9.13s-9.13-4.09-9.13-9.13 4.09-9.13 9.13-9.13 9.13 4.09 9.13 9.13zm97.44-1.16c0 5.04-4.09 9.13-9.13 9.13s-9.13-4.09-9.13-9.13 4.09-9.13 9.13-9.13 9.13 4.09 9.13 9.13zm7.63-11.03l11.79 0.08c-0.91-1.96-2.08-3.7-3.91-5.12l-4.56 0.35c-0.84 0.13-1.19 0.5-1.5 0.89l-1.82 3.8z"/>\n    </g>\n    </svg>`},410:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,n=5,a=7){this.showPages=5,this.MINIMUM_PAGE_SIZE=7,this.getRange=(e,t)=>{const n=t-e+1;return Array.from({length:n},((t,n)=>e+n))},this.clamp=(e,t,n)=>Math.min(Math.max(e,t),n),this.generate=()=>{this.pageCount<=this.pagesShown?this.delta=this.pagesShown:this.delta=this.currentPage<this.boundaryPagesShown||this.currentPage>this.pageCount-this.boundaryPagesShown?this.boundaryPagesShown:this.centerPagesShown;const e={start:0,end:0};e.start=Math.round(this.currentPage-this.delta/2),e.end=Math.round(this.currentPage+this.delta/2),e.start-1!=1&&e.end+1!==this.pageCount||(e.start+=1,e.end+=1);let t=this.currentPage>this.delta?this.getRange(Math.min(e.start,this.pageCount-this.delta),Math.min(e.end,this.pageCount)):this.getRange(1,Math.min(this.pageCount,this.delta+1));this.currentPage>this.pageCount-this.boundaryPagesShown&&this.pageCount>this.pagesShown&&(t=this.getRange(this.pageCount-this.delta,this.pageCount));const n=(e,n)=>t.length+1!==this.pageCount?n:[e],a=t[t.length-1];return 1!==t[0]&&(t=n(1,[1,"..."]).concat(t)),a&&a<this.pageCount&&(t=t.concat(n(this.pageCount,["...",this.pageCount]))),t},this.currentPageNumber=e,this.pageCount=t,this.showPages=n,this.MINIMUM_PAGE_SIZE=a,this.delta=0,this.currentPage=this.clamp(e,1,t),this.pagesShown=this.clamp(n,this.MINIMUM_PAGE_SIZE,t),this.centerPagesShown=this.pagesShown-5,this.boundaryPagesShown=this.pagesShown-3}}},159:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(524);const r=a(n(652));window.onload=()=>{(new r.default).run()}},569:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(202));class s extends r.default{constructor(e,t){super(e),this.errorType=t}generateBodyContent(){const e=document.createElement("div");e.classList.add("page-error-wrapper");const t=document.createElement("div");t.classList.add("center");const n=document.createElement("h1");n.id="word";"Error! The page was not found.".split("").forEach(((e,t)=>{const a=document.createElement("span");a.innerHTML=e,a.classList.add("letter"),a.classList.add(`letter-${t}`),n.append(a)})),t.append(n),e.append(t),this.container.append(e)}async render(){return this.generateBodyContent(),this.container}}s.TextObject={404:"Error! The page was not found."},t.default=s},474:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(202)),s=a(n(30)),i=n(776);class o extends r.default{async getCars(){const e=new s.default,t=sessionStorage.getItem("paginationGaragecurrentPage")??"1",n=await e.getCars("garage",t),a=new i.Garage("div","garage__wrapper",n);return await a.renderGarage()}async render(){return this.container.append(await this.getCars()),this.container}}t.default=o},311:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorPage=t.WinnersPage=t.GaragePage=void 0;var r=n(474);Object.defineProperty(t,"GaragePage",{enumerable:!0,get:function(){return a(r).default}});var s=n(827);Object.defineProperty(t,"WinnersPage",{enumerable:!0,get:function(){return a(s).default}});var i=n(569);Object.defineProperty(t,"ErrorPage",{enumerable:!0,get:function(){return a(i).default}})},827:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(30)),s=a(n(490)),i=a(n(202));class o extends i.default{async getWinners(){const e=new r.default,t=sessionStorage.getItem("paginationWinnerscurrentPage")??"1",n=await e.getWinners(t),a=new s.default("div","winners",n);return await a.renderWinners()}async render(){return this.container.append(await this.getWinners()),this.container}}t.default=o},211:(e,t,n)=>{e.exports=n.p+"assets/images/3a69071a63aac49de5ca.png"},284:e=>{e.exports=JSON.parse('["Acura","Alfa Romeo","Alpine","Apollo","Apple","Aston Martin","Audi","Automobili Pininfarina","Bentley","BMW","Bollinger","Brilliance","Bugatti","Buick","BYD","Cadillac","Chana","Chery","Chevrolet","Chrysler","Citroen","Continental","CUPRA","Dacia","Daewoo","Daihatsu","Datsun","Detroit Electric","Dodge","DS Automobiles","FAW","Ferrari","Fiat","Fisker","Ford","Foxtron","Geely","Genesis","GMC","Great Wall","Haval","Honda","Hummer","Hyundai","Ineos","Infiniti","Iran Khodro","JAC","Jaguar","Jeep","JETOUR","KIA","Koenigsegg","Lada","Lamborghini","Lancia","Land Rover","Lexus","Lifan","Lincoln","Lordstown","Lotus","Lucid","LvChi","Lynk & Co","Maserati","Maybach","Mazda","MCLaren","Mercedes-Benz","MG","MINI","Mitsubishi","Nikola","NIO","Nissan","Opel","Pagani","Peugeot","Polestar","Porsche","Qoros","Range Rover","Ravon","Renault","Rimac","Rivian","Rolls-Royce","Saab","Saipa","SEAT","Skoda","smart","SsangYong","SSC North America","Stellantis","Subaru","Suzuki","Tata","Tesla","Torsus","Toyota","VinFast","Volkswagen","Volvo","Xpeng","Zotye"]')},851:e=>{e.exports=JSON.parse('["Durango","Ram","Challenger","Charger","Grand Caravan","X7","X5","X3","X6 M","X6","X1","X4","C3 Aircross","C5 Aircross","Duster","CR-V","Corolla","C4 Cactus","DS3 Crossback","C1","C3","Berlingo Multispace","DS4 Crossback","UX 250h","NX 300h","LC 500","RX 350/200t","Rapid","Largus","IS 200t","LS 500h","RX","ES 200/250/350","Hatchback","CX-5","Sedan","CX-30","CX-9","CX-3","MX-5 Roadster","Phantom","Camry","Polo","Cullinan","Ghost","Dawn","Duster","Arkana","Sandero","Logan","Trafic Fourgon","Logan MCV","Captur","Kadjar","RAV4","Rio","Creta","Solaris"]')}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,n),s.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})();n(159)})();